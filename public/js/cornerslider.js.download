(function($,document,window){$.fn.cornerSlider=function(options){var settings=$.extend({showAtScrollingHeight:1300,elemToPresent:"#presentSlider",directionEffect:"right",speedEffect:300,bottom:6,right:6,left:6,top:6,cookieName:'cornerSliderHide',cookieValue:'hidden',cookieMinutesToExpiry:15,onShow:function(){},onHide:function(){},onClose:function(){},},options);var cornerSliderElem=$(this),cornerSliderElemWidth=cornerSliderElem.outerWidth(),cornerSliderElemHeight=cornerSliderElem.outerHeight(),direction="right",flagClose=false;function setCookie(name,value,minutes){var expires;minutes=parseInt(minutes);minutes=(minutes>0)?minutes:null;if(minutes){var date=new Date();date.setTime(date.getTime()+(minutes*60*1000));expires='; expires='+date.toGMTString();document.cookie=name+'='+value+expires+'; path=/';}}function isValidCookie(cName){var cStart,cEnd,cookieVal;if(document.cookie.length<1)return false;cStart=document.cookie.indexOf(cName+'=');if(cStart<0)return false;cStart=cStart+cName.length+1;cEnd=document.cookie.indexOf(';',cStart);if(cEnd==-1)cEnd=document.cookie.length;cookieVal=unescape(document.cookie.substring(cStart,cEnd));return(cookieVal.length>0);}function isAllowedCornerSlider(){if(flagClose)return false;if(isValidCookie(settings.cookieName))return false;return true;}function cornerSliderAppear(elem){elem.removeClass('hidden').addClass('shown').stop();if(settings.directionEffect=='right'){elem.animate({'right':settings.right},settings.speedEffect,function(){});}else if(direction=='bottom'){elem.animate({'bottom':settings.bottom},settings.speedEffect,function(){});}else{elem.animate({'left':settings.left},settings.speedEffect,function(){});}settings.onShow.call(elem);}function cornerSliderDisAppear(elem,width,close){elem.stop();if(settings.directionEffect=='right'){elem.animate({'right':-width},settings.speedEffect,function(){elem.removeClass('shown').addClass('hidden');});}else if(direction=='bottom'){height=cornerSliderElemHeight;elem.animate({'bottom':-height},settings.speedEffect,function(){elem.removeClass('shown').addClass('hidden');});}else{elem.animate({'left':-width},settings.speedEffect,function(){elem.removeClass('shown').addClass('hidden');});}if(close){settings.onClose.call(elem);}else{settings.onHide.call(elem);}}function cornerSliderClose(){cornerSliderElem.find('.close').on('click',function(){flagClose=true;cornerSliderDisAppear(cornerSliderElem,cornerSliderElemWidth,true);});}$(window).scroll(function(){var scrollTopInt=parseInt($(window).scrollTop());var winHeight=parseInt(window.innerHeight);var h1=scrollTopInt+winHeight;var h2=$(settings.elemToPresent).length==0?settings.showAtScrollingHeight:parseInt($(settings.elemToPresent).offset().top);if(h1>h2){if(cornerSliderElem.hasClass('hidden')&&isAllowedCornerSlider(settings.cookieName)){cornerSliderAppear(cornerSliderElem);}}else if(cornerSliderElem.hasClass('shown')){cornerSliderDisAppear(cornerSliderElem,cornerSliderElemWidth,false);}});(function init(){width=cornerSliderElemWidth;height=cornerSliderElemHeight;direction=(settings.directionEffect=='left'||settings.directionEffect=='right')?settings.directionEffect:"bottom";cornerSliderClose();cornerSliderElem.addClass("hidden");cornerSliderElem.css({'bottom':settings.bottom});if(direction=='left')cornerSliderElem.css({'left':-width,'right':'auto'});else if(direction=='right')cornerSliderElem.css({'right':-width,'left':'auto'});else{if(direction=='bottom')cornerSliderElem.css({'bottom':-height});if(settings.directionEffect=='bottom left')cornerSliderElem.css({'left':settings.left,'right':'auto'});else if(settings.directionEffect=='bottom center')cornerSliderElem.css({'margin-right':'auto','margin-left':'auto','right':0,'left':0});else if(settings.directionEffect=='bottom right')cornerSliderElem.css({'right':settings.right,'left':'auto'});else
cornerSliderElem.css({'right':settings.right,'left':'auto'});}}());};}(jQuery,document,window));